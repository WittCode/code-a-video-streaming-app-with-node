<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body style="background-color: #131313;">
  <h1 id="title" style="color: red;">WE ARE LIVE!</h1>
  <!-- To autoplay, the video needs to be muted-->
  <video id="video" width="320" height="240" controls autoplay muted>
    <source src="video" type="video/mp4">
    Your browser does not support the video tag.
  </video>

  <script>
    const video = document.getElementById('video');
    const title = document.getElementById('title');

    video.addEventListener('ended', () => {
      title.innerText = 'Live Stream Ended';
      video.src = '';
    })
    
    fetch('/currentTime').then(res => res.text()).then(currentTime => {
      if (isNaN(currentTime)) {
        title.innerText = 'Live Stream Ended';
        video.src = '';
      } else {
        video.currentTime = currentTime;
      }
    });
  </script>
</body>
</html>